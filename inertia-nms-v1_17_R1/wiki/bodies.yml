################################################################################
#                        INERTIA - BODIES.YML REFERENCE                        #
#                                                                              #
# Этот файл определяет физические свойства объектов.                           #
# Все объекты делятся на 3 типа:                                               #
# 1. blocks   - Одиночные объекты (коробки, сферы, камни)                      #
# 2. chains   - Цепочки, состоящие из звеньев (с физикой веревки)              #
# 3. ragdolls - Сложные составные объекты со скелетом (мобы, игроки, машины)   #
################################################################################

# ==============================================================================
# 1. BLOCKS (Одиночные объекты)
# ==============================================================================
blocks:
  example_block:
    # [Обязательно] Ссылка на визуальную модель из файла render.yml
    render:
      model: "stone_visual"

    # [Обязательно] Физические параметры
    physics:
      # [Float] Масса объекта в килограммах. (Обычный блок ~10-100, ТНТ ~50)
      # Чем больше масса, тем сложнее сдвинуть объект.
      mass: 100.0

      # [Float] Коэффициент трения (0.0 - 1.0).
      # 0.0 = Лед (скользит бесконечно)
      # 1.0 = Резина (быстро останавливается)
      friction: 0.5

      # [Float] Упругость/Пружинистость (0.0 - 1.0).
      # 0.0 = Камень (удар гасится полностью)
      # 1.0 = Супер-мячик (отскакивает с той же силой)
      restitution: 0.0

      # [Float] Сопротивление воздуха при движении (0.0 - 1.0).
      # 0.0 = Вакуум, 0.1 = Воздух, 0.9 = Вода/Мед
      linear-damping: 0.05

      # [Float] Сопротивление воздуха при вращении (0.0 - 1.0).
      # Останавливает бесконечное вращение объекта.
      angular-damping: 0.05

      # [Enum] Тип движения:
      # Dynamic   - Обычный физический объект (падает, толкается).
      # Static    - Неподвижный объект (стена, пол). Имеет бесконечную массу.
      # Kinematic - Двигается только скриптом/кодом, но толкает других.
      motion-type: Dynamic

      # [Integer] Слой коллизии (обычно 0).
      # Используется для сложной логики (кто с кем сталкивается).
      object-layer: 0

      # [List<String>] Форма коллизии (Хитбокс).
      # Поддерживаемые типы:
      # - box x=... y=... z=... (Прямоугольник)
      # - sphere radius=... (Сфера)
      # - capsule height=... radius=... (Капсула)
      # - cylinder height=... radius=... (Цилиндр)
      # - convex_hull mesh=... (Сложная форма из .obj файла)
      # Параметр convexradius скругляет углы (оптимизация).
      shape:
        - "type=box x=0.5 y=0.5 z=0.5"

# ==============================================================================
# 2. CHAINS (Цепи и веревки)
# ==============================================================================
chains:
  heavy_iron_chain:
    # Визуальная модель (применяется к КАЖДОМУ звену)
    render:
      model: "iron_chain_link"

    # Физика ОДНОГО звена
    physics:
      mass: 50.0
      friction: 1.0
      restitution: 0.05
      linear-damping: 0.05
      angular-damping: 0.05
      motion-type: Dynamic
      object-layer: 0
      # Хитбокс звена (должен быть чуть меньше визуального размера, чтобы не застревал)
      shape: "type=box x=0.1 y=0.5 z=0.1"

    # [NEW] Настройки генерации цепи
    creation:
      # [Double] Расстояние между центрами соседних звеньев (обычно высота звена)
      spacing: 1.05
      # [Double] Смещение точки крепления от центра звена (обычно spacing / 2)
      joint-offset: 0.525

    # [NEW] Настройки стабилизации (Анти-растяжение)
    # Позволяет сделать цепь жесткой, не увеличивая нагрузку на ВЕСЬ мир.
    stabilization:
      # [Integer] Кол-во проверок позиции за тик (Стандарт Jolt: 2).
      # Для длинных цепей ставьте 16, 32 или 64. Чем больше, тем меньше растяжение.
      position-iterations: 32
      # [Integer] Кол-во проверок скорости за тик (Стандарт Jolt: 2).
      # Помогает гасить колебания. Рекомендуется 8-16.
      velocity-iterations: 8

    # [NEW] Ограничения подвижности звеньев
    limits:
      angular-movement:
        # [Float] Максимальный угол отклонения звена в градусах (0..180).
        # 0 = Жесткая палка (звенья не гнутся).
        # 45 = Реалистичная цепь.
        # 90+ = Полная свобода (может складываться сама в себя).
        swing-limit-angle: 45.0

        # [Enum] Вращение звена вокруг своей оси (Twist).
        # FREE    - Свободное вращение (как обычная цепь).
        # LOCKED  - Вращение запрещено (как велосипедная цепь).
        # LIMITED - Вращение ограничено малым углом.
        twist-mode: FREE

# ==============================================================================
# 3. RAGDOLLS (Рэгдоллы / Скелетная физика)
# ==============================================================================
ragdolls:
  steve:
    # Список частей тела
    parts:

      # --- КОРНЕВАЯ ЧАСТЬ (Обычно туловище) ---
      torso:
        mass: 30.0
        # [Vector] Размер хитбокса (если shape не задан явно)
        size: "0.5 0.75 0.25"
        # Явное задание формы
        shape: "type=box x=0.25 y=0.375 z=0.125"
        render-model: "ragdoll_torso"
        # У корня нет родителя (parent), он главный.
        physics:
          linear-damping: 0.05
          angular-damping: 0.05
          friction: 0.6
          restitution: 0.0

      # --- ДОЧЕРНЯЯ ЧАСТЬ (Например, голова) ---
      head:
        mass: 8.0
        size: "0.5 0.5 0.5"
        shape: "type=box x=0.1875 y=0.1875 z=0.1875"
        render-model: "ragdoll_head"

        # [String] Имя родительской части
        parent: "torso"

        # [Boolean] Должны ли эта часть и родитель сталкиваться?
        # Обычно false, чтобы голова не "выталкивалась" из туловища.
        collide-with-parent: false

        physics:
          linear-damping: 0.05
          angular-damping: 0.05
          friction: 0.6

        # Настройки сустава (Joint)
        joint:
          # [Vector] Точка крепления на РОДИТЕЛЕ (относительно центра родителя)
          parent-pivot: "0.0 0.375 0.0" # Верх туловища

          # [Vector] Точка крепления на ЭТОЙ части (относительно центра этой части)
          child-pivot: "0.0 -0.25 0.0"  # Низ головы

          # [List] Какие оси перемещения заблокированы.
          # Обычно блокируются все 3 перемещения (Translation), чтобы голова не отрывалась.
          fixed-axes: ["TranslationX", "TranslationY", "TranslationZ"]

          # Ограничения вращения сустава (в градусах)
          # Формат: "мин макс"
          limits:
            rotation-x: "-45 45"  # Кивок (вперед-назад)
            rotation-y: "-50 50"  # Поворот (влево-вправо)
            rotation-z: "-30 30"  # Наклон (к плечу)