world:
  gravity: "0.0 -17.18 0.0"
  tick-rate: 20
  collision-steps: 4

  # Управление жизненным циклом физических чанков
  chunk-management:
    # Генерировать физику автоматически при загрузке чанка
    generate-on-load: true
    # Удалять физические тела при выгрузке чанка (рекомендуется true)
    remove-on-unload: true
    # Обновлять физику при изменении блоков
    update-on-block-change: true
    # Задержка (в тиках) перед обновлением чанка после изменения блока
    # Помогает при массовом строительстве (WorldEdit)
    update-debounce-ticks: 1
    # Максимальное число чанков, применяемых за тик после генерации мешей
    mesh-apply-per-tick: 4

  size:
    origin: "0 0"
    height-size: "0 1024"
    min: "-5120 -5120"
    max: "5120 5120"
    create-walls: true
    kill-below-min-y: true
    prevent-exit: true

  simulation:
    enable: true
    type: GREEDY_MESH

    # Настройки алгоритма Greedy Meshing
    greedy-mesh:
      # Объединять блоки по вертикали (Y). True = меньше тел, выше скорость.
      vertical-merging: true
      # Максимальная высота одного объединенного тела (в блоках)
      max-vertical-size: 64
      # Тип физической формы чанка:
      # MeshShape - триангулированный меш
      # CompoundShape - составная форма из AABB-частей greedy mesh
      shape-type: CompoundShape
      # Fast-path читает блоки напрямую из секций без ChunkSnapshot.
      # Отключите для быстрого rollback на legacy путь.
      fast-chunk-capture: true
      # Бюджет (в миллисекундах за тик) на capture снапшотов чанков в main-thread.
      # 0 = без ограничения.
      max-capture-millis-per-tick: 2

    # Настройки для режима FLOOR_PLANE
    floor-plane:
      y-level: 1
      y-size: 1
      friction: 1.0
      restitution: 0.025
      size:
        origin: "0 0"
        min: "-5120 -5120"
        max: "5120 5120"

  solver:
    velocity-iterations: 10
    position-iterations: 2
    baumgarte-stabilization: 0.2
    speculative-contact-distance: 0.02
    penetration-slop: 0.02
    linear-cast-threshold: 0.75
    linear-cast-max-penetration: 0.25
    manifold-tolerance: 1.0e-3
    max-penetration-distance: 0.2
    constraint-warm-start: true
    use-body-pair-contact-cache: true
    use-large-island-splitter: true
    allow-sleeping: true
    deterministic-simulation: true

  performance:
    max-bodies: 65536
    num-body-mutexes: 0
    max-body-pairs: 65536
    max-contact-constraints: 10240
    temp-allocator-size: 10485760

  sleeping:
    point-velocity-threshold: 0.03
    time-before-sleep: 0.5
